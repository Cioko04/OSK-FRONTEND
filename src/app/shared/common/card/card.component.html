<figure
  class="m-4"
  [ngClass]="{
    'figure-hover': !cardDetails.showActionButton && !cardDetails.showDetails,
    'pb-3':
      !cardDetails.showActionButton &&
      !cardDetails.showDetails &&
      !cardDetails.info
  }"
  [ngStyle]="{
    '--accent': cardDetails.accentColor,
    'aspect-ratio': cardDetails.aspectRatio
  }"
  #container
>
  <div
    *ngIf="!panelOpenState"
    class="row main-row p-3"
    [ngClass]="{
      'main-row-hover': cardDetails.showDetails
    }"
    (click)="choose(cardDetails.sourceId)"
  >
    <div class="col-7 pictogram">
      <img [src]="'../../../../assets/' + cardDetails.imagePath" alt="Icon" />
    </div>
    <div class="col-5 label">
      <p appResizeText [ratio]="0.6" [innerHTML]="cardDetails.label! | newlineToBr"></p>
    </div>
  </div>
  <div *ngIf="cardDetails.info" class="row detail-row pb-3 px-3">
    <div class="col-12 p-0 info">
      <p appResizeText [innerHTML]="cardDetails.info! | newlineToBr"></p>
    </div>
  </div>
  <div
    *ngIf="cardDetails.showDetails"
    class="row"
    [ngClass]="{
      'detail-row-extension': panelOpenState
    }"
  >
    <div class="col-12 info p-0">
      <mat-accordion>
        <mat-expansion-panel
          (opened)="panelOpenState = true"
          (closed)="panelOpenState = false"
        >
          <mat-expansion-panel-header>
            <mat-panel-title> LISTA SPOTKAŃ</mat-panel-title>
            <mat-panel-description>
              <p>10.06.2024 - 30.09.2024</p>
              <mat-icon>date_range</mat-icon>
            </mat-panel-description>
          </mat-expansion-panel-header>
          <div class="row extension-details mt-2">
            <div
              *ngFor="let extensionDetail of cardDetails.extensionDetails"
              class="col-6 col-md-3"
            >
              <mat-icon>date_range</mat-icon>
              <p class="pb-2">{{ extensionDetail }}</p>
            </div>
          </div>
        </mat-expansion-panel>
      </mat-accordion>
    </div>
  </div>
  <div *ngIf="cardDetails.showActionButton" class="row detail-row">
    <div class="col-12 pb-3 info d-flex justify-content-center action-buttons">
      <button class="btn outline mx-2" (click)="edit(cardDetails.sourceId!)">
        EDUTUJ
      </button>
      <button class="btn fill mx-2" (click)="choose(cardDetails.sourceId!)">
        ZARZĄDZAJ
      </button>
    </div>
  </div>
</figure>
